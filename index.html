<html>
<head>
<title> Minecraft server configuration </title>

<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>

<script>

function refreshStatus() {
    $.getJSON('/status', function (result) {
        if (result.running) $('#statusLabel').text('running');
        else $('#statusLabel').text('stopped');

        setTimeout(refreshStatus, 1000);
    });
}

$(function() {
    refreshStatus();

    $('#startButton').click(function () {
        $.post('/start', function (result) {
            console.log(result);
        });
    });

    $('#stopButton').click(function () {
        $.post('/stop', function (result) {
            console.log(result);
        });
    });

    $('#configButton').click(function () {
        $.post('/config', { config: $('#configTextarea').val() }, function (result) {
            console.log(result);
        });
    });

    $.get('/config', function (result) {
        $('#configTextarea').val(result);
    });

    $('#opsButton').click(function () {
        $.post('/ops', { ops: $('#opsTextarea').val() }, function (result) {
            console.log(result);
        });
    });

    $.get('/ops', function (result) {
        console.log(result)
        $('#opsTextarea').val(result);
    });
});

</script>

</head>

<body>

<h4>Server <span id="statusLabel"></span></h4>

<p>
    <button id="startButton">Start</button>
    <button id="stopButton">Stop</button>
</p>

<p>
    <h4>Configuration:</h4>
    <textarea id="configTextarea" cols="60" rows="30"></textarea>
    <br/>
    <button id="configButton">Save and Restart</button>
</p>

<p>
    <h4>Server Admins:</h4>
    One username per line.<br/>
    <textarea id="opsTextarea" cols="60" rows="5"></textarea>
    <br/>
    <button id="opsButton">Save and Restart</button>
</p>

</body>
</html>